# وثيقة متطلبات المنتج (PRD) — العربية
**المشروع:** Direct Drive | Ultra Downloader (Beta v0.2)  
**التاريخ:** 2026-01-21  
**الحالة:** مسودة / حالة مجمدة  

---

## 1. نظرة عامة على المنتج
**Direct Drive** (درايف مباشر) هو تطبيق ويب يعمل من جانب العميل (Client-side) مصمم لتحويل روابط مشاركة جوجل درايف القياسية (وضع المعاينة) إلى روابط تحميل مباشرة. يتميز التطبيق بتصميم عصري "زجاجي سيبراني" (Cyber-Glass)، ونظام تحذير بصري "الحارس الذكي" (Smart Guard) للتنبيه حول الصلاحيات، ودعم ثنائي اللغة بالكامل (الإنجليزي/العربي). يعمل التطبيق بالكامل في المتصفح دون الاعتماد على خوادم خلفية (Backend).

---

## 2. الأهداف وعدم الأهداف

### الأهداف
- **تحويل فوري:** توفير تحويل لحظي لروابط جوجل درايف إلى صيغة التحميل المباشر.
- **توعية أمان المستخدم:** تذكير المستخدمين بصرياً بالتحقق من صلاحيات الملف ("أي شخص لديه الرابط") عبر نظام "الحارس الذكي".
- **التميز البصري:** تقديم واجهة "زجاجية سيبرانية" متجاوبة ومتميزة مع رسوم متحركة.
- **إمكانية الوصول:** دعم ثنائي اللغة بالكامل مع تبديل الاتجاه (RTL/LTR) بشكل صحيح.

### عدم الأهداف (Non-Goals)
- **استضافة الملفات:** الأداة لا تستضيف أو تخزن أي ملفات.
- **التكامل مع API:** لا تقوم الأداة بالتحقق من وجود الملف أو صلاحياته عبر واجهة برمجة تطبيقات جوجل (تعتمد فقط على الأنماط/Regex).
- **المعالج الجماعية:** تحويل روابط متعددة في وقت واحد غير مدعوم حالياً.

---

## 3. المستخدمون المستهدفون
- **مستخدمو الإنترنت العامون:** الأفراد الذين يشاركون الملفات ويرغبون في أن يقوم المستلمون بالتحميل فوراً دون شاشة معاينة جوجل.
- **صناع المحتوى:** المستخدمون الذين يحتاجون لروابط تحميل أنظف لمنصات التواصل أو المواقع.
- **المتحدثون بالعربية والإنجليزية:** المستخدمون الذين يحتاجون لواجهة مترجمة وموطنة.

---

## 4. المتطلبات الوظيفية

| المعرف | المتطلب | الأولوية |
| :--- | :--- | :--- |
| **FR-001** | **تحليل الرابط واستخراج المعرف**<br>يجب أن يستخرج النظام معرف الملف (File ID) الفريد من روابط جوجل درايف القياسية باستخدام Regex (مثلاً: `/d/FILE_ID/`). | حرجة |
| **FR-002** | **توليد الرابط المباشر**<br>يجب أن يقوم النظام ببناء رابط تحميل مباشر باستخدام الصيغة: `https://drive.google.com/uc?export=download&id={FILE_ID}`. | حرجة |
| **FR-003** | **التبديل ثنائي اللغة**<br>يجب أن يتمكن المستخدم من التبديل بين الإنجليزية والعربية. يجب أن يغير التبديل لغة النص، وعائلة الخط (`Inter/Lexend` مقابل `Readex Pro/Cairo`)، واتجاه التخطيط (`LTR` مقابل `RTL`). | عالية |
| **FR-004** | **تحذير الحارس الذكي**<br>يجب أن يعرض النظام تحذيراً بصرياً ("هل اخترت 'أي شخص لديه الرابط'؟") فوراً عند اكتشاف معرف ملف صالح في الإدخال. | متوسطة |
| **FR-005** | **النسخ للحافظة**<br>يجب أن يوفر النظام زر "نسخ" يحفظ الرابط المولد في حافظة النظام ويوفر تغذية راجعة بصرية ("تم النسخ!"). | عالية |
| **FR-006** | **معالجة الأخطاء**<br>يجب أن يعرض النظام رسالة خطأ ("رابط جوجل درايف غير صالح") إذا كان الإدخال لا يحتوي على نمط رابط درايف صحيح. | متوسطة |
| **FR-007** | **مسح الإدخال**<br>إعادة تعيين الإدخال أو إدخال بيانات غير صالحة يجب أن يخفي مؤشرات النتيجة والتحذير السابقة. | منخفضة |

---

## 5. المتطلبات غير الوظيفية

| المعرف | المتطلب | النوع |
| :--- | :--- | :--- |
| **NFR-001** | **التنفيذ من جانب العميل**<br>يجب أن تعمل جميع المنطق البرمجي في متصفح المستخدم؛ لا يُسمح بأي معالجة من جانب الخادم. | هندسية |
| **NFR-002** | **النمط البصري**<br>يجب أن تلتزم الواجهة بنمط "زجاجي سيبراني": الوضع الداكن (`#050510`)، لمسات نيون (`سماوي`، `أرجواني`، `أخضر`)، وتأثيرات الزجاج (blur effects). | تصميم/تجربة مستخدم |
| **NFR-003** | **التجاوب**<br>يجب أن يتكيف التخطيط مع الأجهزة المحمولة (تعديلات max-width 480px محددة في CSS). | قابلية الاستخدام |
| **NFR-004** | **الأداء**<br>يجب أن يكون توليد الرابط "فورياً" (تأخير المسح المحاكى < 1000ms مقبول لتجربة المستخدم). | أداء |

---

## 6. القيود التقنية
- **نقطة نهاية غير رسمية:** يعتمد التطبيق على `drive.google.com/uc?export=download`، وهي ليست واجهة برمجية رسمية عامة وقد تخضع لقيود الاستخدام أو التغيير.
- **تويفق المتصفح:** يتطلب دعماً للمتصفحات الحديثة (ES6+ JavaScript و CSS Variables/Flexbox).
- **قيود الملفات المحلية:** بعض ميزات الحافظة قد تتطلب HTTPS أو صلاحيات متصفح محددة (على الرغم من أنها من جانب العميل فقط).

---

## 7. البيئة والاعتمادات
- **نظام التشغيل المستهدف:** محايد (مستند للويب).
- **المضيف:** استضافة ويب ثابتة (مثل GitHub Pages) أو نظام ملفات محلي.
- **البيئة التشغيلية:** متصفح ويب حديث (Chrome, Edge, Firefox, Safari).
- **الأصول الخارجية:** خطوط جوجل (Inter, Lexend, Readex Pro, Cairo).
- **المكتبات:** لا يوجد (Vanilla JS).

---

## 8. خارج النطاق
- تحويل روابط المجلدات.
- مصادقة جوجل درايف (OAuth).
- التكامل مع خدمات تقصير الروابط.
- التحليلات/التتبع.

---

## 9. المخاطر والافتراضات

| معرف الخطر | الخطر | الأثر | التخفيف |
| :--- | :--- | :--- | :--- |
| **RISK-001** | **تغيير صيغة رابط جوجل**<br>المحفز: جوجل تغير هيكلية الرابط لملفات درايف.<br>الإشارة: خطأ "رابط غير صالح" لملفات صالحة. | عالٍ (تعطل الميزة) | التخفيف: تحديث منطق Regex.<br>البديل: السماح بإدخال المعرف يدوياً (مستقبلاً). |
| **RISK-002** | **إيقاف نقطة نهاية التحميل**<br>المحفز: جوجل تحظر معامل `uc?export=download`.<br>الإشارة: الروابط المولدة تعيد التوجيه للمعاينة أو 404. | حرج (فشل التطبيق) | التخفيف: لا يوجد (اعتماد جوهري).<br>البديل: إيقاف المشروع أو التبديل للـ API (يتطلب Backend). |
| **RISK-003** | **خطأ صلاحيات المستخدم**<br>المحفز: المستخدم يولد رابطاً لملف خاص.<br>الإشارة: فشل رابط التحميل/طلب تسجيل دخول. | متوسط (احتكاك تجربة المستخدم) | التخفيف: تحذير **الحارس الذكي (FR-004)** لتعليم المستخدم. |

**الافتراضات:**
- المستخدمون لديهم معرفة أساسية بإعدادات مشاركة جوجل درايف.
- نمط `uc?export=download` سيظل مستقراً في المستقبل المنظور.

---

## 10. تحليل أثر التغيير
*غير منطبق - هذه الوثيقة ترصد الحالة الأولية المجمدة (v0.2).*

---

## 11. سجل الأسئلة المفتوحة والتوضيحات
- **س1:** هل هناك إصدارات متصفح محددة يجب دعمها؟ *الحالة: مفترض "المتصفحات الحديثة الدائمة التحديث".*
- **س2:** هل هناك خطة للتحقق من الروابط عبر API في الإصدار 1.0؟ *الحالة: اعتبار مستقبلي.*

---

## 12. معايير القبول (Acceptance Criteria)

**FR-001 / FR-002 (المسار الأساسي):**
- **بفرض** وجود رابط درايف قياسي `https://drive.google.com/file/d/123XYZ/view`
- **عندما** يتم لصقه في الإدخال والضغط على "توليد الرابط"
- **إذن** يجب أن يكون المخرج `https://drive.google.com/uc?export=download&id=123XYZ`

**FR-003 (ثنائي اللغة):**
- **بفرض** التطبيق باللغة الإنجليزية
- **عندما** يتم النقر على زر التبديل "AR"
- **إذن** تتغير سمة `dir` إلى `rtl`، ويتغير العنوان للعربية، وتتم ترجمة التحذيرات.

**FR-004 (الحارس الذكي):**
- **بفرض** وجود حقل إدخال
- **عندما** يتم اكتشاف معرف صالح
- **إذن** يظهر صندوق "تحذير الصلاحيات" الأصفر فوراً.
